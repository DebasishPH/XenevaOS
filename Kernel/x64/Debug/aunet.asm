; Listing generated by Microsoft (R) Optimizing Compiler Version 19.29.30154.0 

include listing.inc

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?netadapters@@3PEAUhashmap@@EA			; netadapters
_BSS	SEGMENT
?netadapters@@3PEAUhashmap@@EA DQ 01H DUP (?)		; netadapters
_BSS	ENDS
msvcjmc	SEGMENT
__25D49534_aunet@cpp DB 01H
msvcjmc	ENDS
PUBLIC	?AuInitialiseNet@@YAXXZ				; AuInitialiseNet
PUBLIC	AuAddNetAdapter
PUBLIC	AuGetNetworkAdapter
PUBLIC	?AuNetworkRoute@@YAPEAU__VFS_NODE__@@I@Z	; AuNetworkRoute
PUBLIC	__JustMyCode_Default
PUBLIC	??_C@_04PJHBAHNI@?1dev@				; `string'
PUBLIC	??_C@_08IJMNAICA@?1dev?1net@			; `string'
PUBLIC	??_C@_05IBEDHKEB@e1000@				; `string'
EXTRN	AuVFSFind:PROC
EXTRN	AuHashmapCreate:PROC
EXTRN	AuHashmapSet:PROC
EXTRN	AuHashmapGet:PROC
EXTRN	?AuDevFSCreateFile@@YAHPEAU__VFS_NODE__@@PEADE@Z:PROC ; AuDevFSCreateFile
EXTRN	AuDevFSAddFile:PROC
EXTRN	?AuSocketInstall@@YAXXZ:PROC			; AuSocketInstall
EXTRN	__CheckForDebuggerJustMyCode:PROC
;	COMDAT pdata
pdata	SEGMENT
$pdata$?AuInitialiseNet@@YAXXZ DD imagerel $LN3
	DD	imagerel $LN3+86
	DD	imagerel $unwind$?AuInitialiseNet@@YAXXZ
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$AuAddNetAdapter DD imagerel $LN3
	DD	imagerel $LN3+94
	DD	imagerel $unwind$AuAddNetAdapter
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$AuGetNetworkAdapter DD imagerel $LN3
	DD	imagerel $LN3+57
	DD	imagerel $unwind$AuGetNetworkAdapter
pdata	ENDS
;	COMDAT pdata
pdata	SEGMENT
$pdata$?AuNetworkRoute@@YAPEAU__VFS_NODE__@@I@Z DD imagerel $LN3
	DD	imagerel $LN3+44
	DD	imagerel $unwind$?AuNetworkRoute@@YAPEAU__VFS_NODE__@@I@Z
pdata	ENDS
;	COMDAT ??_C@_05IBEDHKEB@e1000@
CONST	SEGMENT
??_C@_05IBEDHKEB@e1000@ DB 'e1000', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_08IJMNAICA@?1dev?1net@
CONST	SEGMENT
??_C@_08IJMNAICA@?1dev?1net@ DB '/dev/net', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_04PJHBAHNI@?1dev@
CONST	SEGMENT
??_C@_04PJHBAHNI@?1dev@ DB '/dev', 00H			; `string'
CONST	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?AuNetworkRoute@@YAPEAU__VFS_NODE__@@I@Z DD 025030e01H
	DD	0b209230eH
	DD	05005H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$AuGetNetworkAdapter DD 025030f01H
	DD	0d20a230fH
	DD	05006H
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$AuAddNetAdapter DD 025031401H
	DD	0d20f2314H
	DD	0500bH
xdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$?AuInitialiseNet@@YAXXZ DD 025030b01H
	DD	0d206230bH
	DD	05002H
xdata	ENDS
; Function compile flags: /Odt
;	COMDAT __JustMyCode_Default
_TEXT	SEGMENT
__JustMyCode_Default PROC				; COMDAT
	ret	0
__JustMyCode_Default ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File E:\Xeneva Project\Aurora\Kernel\Net\aunet.cpp
;	COMDAT ?AuNetworkRoute@@YAPEAU__VFS_NODE__@@I@Z
_TEXT	SEGMENT
address$ = 80
?AuNetworkRoute@@YAPEAU__VFS_NODE__@@I@Z PROC		; AuNetworkRoute, COMDAT

; 76   : AuVFSNode* AuNetworkRoute(uint32_t address){

$LN3:
	mov	DWORD PTR [rsp+8], ecx
	push	rbp
	sub	rsp, 96					; 00000060H
	lea	rbp, QWORD PTR [rsp+32]
	lea	rcx, OFFSET FLAT:__25D49534_aunet@cpp
	call	__CheckForDebuggerJustMyCode

; 77   : 	/*if (address == 0x0100007F)*/ /* loop device */
; 78   : 	return AuGetNetworkAdapter("e1000");

	lea	rcx, OFFSET FLAT:??_C@_05IBEDHKEB@e1000@
	call	AuGetNetworkAdapter

; 79   : }

	lea	rsp, QWORD PTR [rbp+64]
	pop	rbp
	ret	0
?AuNetworkRoute@@YAPEAU__VFS_NODE__@@I@Z ENDP		; AuNetworkRoute
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File E:\Xeneva Project\Aurora\Kernel\Net\aunet.cpp
;	COMDAT AuGetNetworkAdapter
_TEXT	SEGMENT
node$ = 0
name$ = 96
AuGetNetworkAdapter PROC				; COMDAT

; 66   : AuVFSNode* AuGetNetworkAdapter(char* name) {

$LN3:
	mov	QWORD PTR [rsp+8], rcx
	push	rbp
	sub	rsp, 112				; 00000070H
	lea	rbp, QWORD PTR [rsp+32]
	lea	rcx, OFFSET FLAT:__25D49534_aunet@cpp
	call	__CheckForDebuggerJustMyCode

; 67   : 	AuVFSNode* node = (AuVFSNode*)AuHashmapGet(netadapters, name);

	mov	rdx, QWORD PTR name$[rbp]
	mov	rcx, QWORD PTR ?netadapters@@3PEAUhashmap@@EA ; netadapters
	call	AuHashmapGet
	mov	QWORD PTR node$[rbp], rax

; 68   : 	return node;

	mov	rax, QWORD PTR node$[rbp]

; 69   : }

	lea	rsp, QWORD PTR [rbp+80]
	pop	rbp
	ret	0
AuGetNetworkAdapter ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File E:\Xeneva Project\Aurora\Kernel\Net\aunet.cpp
;	COMDAT AuAddNetAdapter
_TEXT	SEGMENT
fs$ = 0
netfs$ = 96
name$ = 104
AuAddNetAdapter PROC					; COMDAT

; 55   : void AuAddNetAdapter(AuVFSNode* netfs, char* name) {

$LN3:
	mov	QWORD PTR [rsp+16], rdx
	mov	QWORD PTR [rsp+8], rcx
	push	rbp
	sub	rsp, 112				; 00000070H
	lea	rbp, QWORD PTR [rsp+32]
	lea	rcx, OFFSET FLAT:__25D49534_aunet@cpp
	call	__CheckForDebuggerJustMyCode

; 56   : 	AuHashmapSet(netadapters, name, netfs);

	mov	r8, QWORD PTR netfs$[rbp]
	mov	rdx, QWORD PTR name$[rbp]
	mov	rcx, QWORD PTR ?netadapters@@3PEAUhashmap@@EA ; netadapters
	call	AuHashmapSet

; 57   : 
; 58   : 	AuVFSNode* fs = AuVFSFind("/dev");

	lea	rcx, OFFSET FLAT:??_C@_04PJHBAHNI@?1dev@
	call	AuVFSFind
	mov	QWORD PTR fs$[rbp], rax

; 59   : 	AuDevFSAddFile(fs, "/dev/net", netfs);

	mov	r8, QWORD PTR netfs$[rbp]
	lea	rdx, OFFSET FLAT:??_C@_08IJMNAICA@?1dev?1net@
	mov	rcx, QWORD PTR fs$[rbp]
	call	AuDevFSAddFile

; 60   : }

	lea	rsp, QWORD PTR [rbp+80]
	pop	rbp
	ret	0
AuAddNetAdapter ENDP
_TEXT	ENDS
; Function compile flags: /Odtp /ZI
; File E:\Xeneva Project\Aurora\Kernel\Net\aunet.cpp
;	COMDAT ?AuInitialiseNet@@YAXXZ
_TEXT	SEGMENT
fs$ = 0
?AuInitialiseNet@@YAXXZ PROC				; AuInitialiseNet, COMDAT

; 43   : void AuInitialiseNet() {

$LN3:
	push	rbp
	sub	rsp, 112				; 00000070H
	lea	rbp, QWORD PTR [rsp+32]
	lea	rcx, OFFSET FLAT:__25D49534_aunet@cpp
	call	__CheckForDebuggerJustMyCode

; 44   : 	netadapters = AuHashmapCreate(10);

	mov	ecx, 10
	call	AuHashmapCreate
	mov	QWORD PTR ?netadapters@@3PEAUhashmap@@EA, rax ; netadapters

; 45   : 	AuVFSNode* fs = AuVFSFind("/dev");

	lea	rcx, OFFSET FLAT:??_C@_04PJHBAHNI@?1dev@
	call	AuVFSFind
	mov	QWORD PTR fs$[rbp], rax

; 46   : 	AuDevFSCreateFile(fs, "/dev/net", FS_FLAG_DIRECTORY);

	mov	r8b, 2
	lea	rdx, OFFSET FLAT:??_C@_08IJMNAICA@?1dev?1net@
	mov	rcx, QWORD PTR fs$[rbp]
	call	?AuDevFSCreateFile@@YAHPEAU__VFS_NODE__@@PEADE@Z ; AuDevFSCreateFile

; 47   : 	AuSocketInstall();

	call	?AuSocketInstall@@YAXXZ			; AuSocketInstall

; 48   : }

	lea	rsp, QWORD PTR [rbp+80]
	pop	rbp
	ret	0
?AuInitialiseNet@@YAXXZ ENDP				; AuInitialiseNet
_TEXT	ENDS
END
